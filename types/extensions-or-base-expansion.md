## 基底クラスを拡張するか、拡張メソッドを作るか

基底クラスにメソッドを追加するか、拡張メソッドにするかを決定する際の指標はいくつかあります。

1. **継承の利用**: もし基底クラスのメソッドが派生クラスによって共通して利用される場合、基底クラスにメソッドを追加することが適切です。これにより、派生クラスが基底クラスのメソッドを直接利用できます。
しかし、巨大な基底クラスを生成すると保守性を損ないます。基底クラスの`public`ではないメンバーにアクセスする場合のみに限っても良いでしょう。

2. **ポリモーフィズム**: もし派生クラスが基底クラスのメソッドをオーバーライドする必要がある場合、基底クラスにメソッドを追加します。拡張メソッドではポリモーフィズムが実現できないため、この場合は基底クラスにメソッドを追加することが好ましいです。
ポリモーフィズムは一般的ですが、基底クラスの拡張よりもインターフェースの実装の形で実現したほうが良い場合もあります。

3. **継承の汎化性**: 基底クラスにメソッドを追加することで、そのメソッドは基底クラスのすべての派生クラスで利用可能になります。一方、拡張メソッドは特定の型にのみ適用されるため、利用できる範囲が限定されます。

4. **既存のクラスの修正**: もし既存の基底クラスを修正することが難しい場合や、外部ライブラリのクラスを拡張したい場合は、拡張メソッドを使用することが適切です。これにより、既存のクラスの修正を回避しつつ、新しい機能を追加できます。
大きな基底クラスは、変更時のリスクやテストのコストを増大させる可能性があります。

5. **コードの見通し**: コードの見通しや理解を重視する場合、基底クラスにメソッドを追加することで、そのメソッドがクラスの一部であることが明確になります。一方、拡張メソッドは外部に定義されるため、そのクラスのメソッドであることが直感的に理解されにくい場合があります。

これらの指標を考慮して、基底クラスにメソッドを追加するか、拡張メソッドにするかを決定すると良いでしょう。

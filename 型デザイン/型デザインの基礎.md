### 型の選択肢としての `class`、`struct`、`record` 

C#で型を設計する際に、`class`、`struct`、`record` などどのキーワードを使用するかを決定するための指標は以下の通りです。

#### 1. `class`
- **状態の変更がある場合**: インスタンスの状態が変わることを想定している場合は `class` を使用します。クラスは参照型であり、オブジェクトの状態を変更するメソッドを持つことが多いです。
- **継承が必要な場合**: クラスは継承をサポートしているため、オブジェクト指向の特徴であるポリモーフィズムや継承を利用したい場合に適しています。
- **大きなデータ構造の場合**: 大きなデータを含むオブジェクトや頻繁にコピーされることがないオブジェクトにはクラスを使用します。クラスは参照型なので、コピー操作は参照のコピーとなり、パフォーマンスに優れます。

#### 2. `struct`
- **不変性（イミュータビリティ）を確保したい場合**: 構造体は値型であり、不変のデータを扱うのに適しています。構造体を不変にすることで、スレッドセーフなデザインが可能です。
- **小さなデータ構造の場合**: 小さなデータ（16バイト以下）の場合、構造体を使用することでパフォーマンスの向上が期待できます。値型のため、メモリの効率が良く、ガベージコレクションの負荷を減少させます。
- **頻繁にコピーされる場合**: 値型であるため、構造体は頻繁にコピーされるシナリオに適しています。コピーは浅いコピー（データの複製）となります。

#### 3. `record`
- **データの比較やパターンマッチングが重要な場合**: `record` はデータの等価性や比較、パターンマッチングに適しています。主にデータキャリアとして使用され、`Equals` メソッドや `GetHashCode` メソッドが自動生成されます。
- **不変オブジェクトのための簡便な構文が必要な場合**: `record` は不変オブジェクトを簡単に定義するための構文を提供します。C# 9.0以降、`record` キーワードを使用することで、不変オブジェクトの設計が容易になります。
- **データ転送オブジェクト（DTO）として使用する場合**: データ転送オブジェクトとして使用する際に、`record` のシンプルさと自動生成される機能が役立ちます。

#### 4. `record struct`
- `record` と同等の機能を持つ `struct` で、両方の長所と制約を持ちます。

### 具体例

#### `class` の使用例
```csharp
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }

    public void CelebrateBirthday()
    {
        Age++;
    }
}
```

#### `struct` の使用例
```csharp
public struct Point
{
    public int X { get; }
    public int Y { get; }

    public Point(int x, int y)
    {
        X = x;
        Y = y;
    }
}
```

### `record` の使用例
```csharp
public record Person(string Name, int Age);
```

## 結論

class、struct、record のいずれを使用するかは、設計する型の特性や用途に依存します。各キーワードの特性を理解し、適切な選択を行うことで、コードの可読性、保守性、パフォーマンスを向上させることができます。

### switch文とswitch式の比較

C#には、条件分岐を行うために使用される`switch文`と`switch式`の2つがあります。これらは類似していますが、使い方や目的においていくつかの重要な違いがあります。

#### switch文

`switch文`は従来から存在する条件分岐の方法で、複数の条件に基づいて異なるコードブロックを実行します。

- **構文**:
    ```csharp
    switch (variable)
    {
        case value1:
            // コードブロック
            break;
        case value2:
            // コードブロック
            break;
        default:
            // デフォルトのコードブロック
            break;
    }
    ```
- **特長**:
  - **複数行**: 各ケースで複数行のコードを実行できます。
  - **break必須**: 各ケースブロックの最後に`break`文が必要です。
  - **デフォルトケース**: マッチするケースがない場合のデフォルト処理を定義できます。
  - **副作用**: switch文内での副作用が多い場合に使用されます。

#### switch式

`switch式`はC# 8.0で導入され、単一の値を生成するための条件分岐に使用されます。より簡潔で、主に式ベースの用途に適しています。

- **構文**:
    ```csharp
    var result = variable switch
    {
        value1 => result1,
        value2 => result2,
        _ => defaultResult
    };
    ```
- **特長**:
  - **単一行**: 各ケースで単一の値を返します。
  - **簡潔**: 簡潔で読みやすい構文です。
  - **`default`の代わりに `_` を使用**: デフォルトケースに `_` を使用します。
  - **式として使用**: 式として使用できるため、値を直接返したり、変数に代入したりするのに便利です。

### 比較

| 特徴             | switch文                                      | switch式                                     |
|------------------|-----------------------------------------------|----------------------------------------------|
| **構文**         | `switch`キーワードと`case`キーワードを使用   | `switch`キーワードとパターンマッチングを使用 |
| **目的**         | 複数行のコードブロックを実行                 | 単一の値を生成して返す                        |
| **記述量**       | 冗長になることが多い                         | 簡潔で読みやすい                              |
| **break文**      | 各ケースで必要                                | 不要                                          |
| **デフォルトケース** | `default`キーワードを使用                    | `_`を使用                                    |
| **副作用**       | 多くの副作用がある場合に適している             | 副作用が少なく、純粋な関数型プログラミングに近い|

### 使用例

#### switch文の例

```csharp
int number = 2;
string result;

switch (number)
{
    case 1:
        result = "One";
        break;
    case 2:
        result = "Two";
        break;
    default:
        result = "Other";
        break;
}
```

#### switch式の例

```csharp
int number = 2;
string result = number switch
{
    1 => "One",
    2 => "Two",
    _ => "Other"
};
```
### まとめ

- **switch文**は、複数行のコードを実行する必要がある場合や、複雑な条件分岐が必要な場合に適しています。
- **switch式**は、単一の値を生成するためのより簡潔な方法であり、式ベースの用途に適しています。

用途に応じて、適切な方法を選択することで、コードの可読性と保守性を向上させることができます。

